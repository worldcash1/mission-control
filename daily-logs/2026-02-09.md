---
tags:
  - trading
  - projects/earnings-tracker
---

# 2026-02-09 — Earnings Tracker Major Build Session

## Earnings Tracker App Progress
- **URL:** https://app-five-mu-29.vercel.app
- **Vercel project:** nams-projects-9474d015/app
- **Convex backend:** cautious-antelope-194 (prod data)
- **Dev Convex:** woozy-hummingbird-76

### What was built/done:
1. **Rolling 10-trade expectancy trend line** added to equity curve (ComposedChart with dual Y-axes)
2. **3 separate dashboard pages** built by sub-agent:
   - `/iron-condors` — IRON_BUTTERFLY + IRON_CONDOR
   - `/straddles` — STRADDLE, SHORT_STRADDLE, STRANGLE, SHORT_CALLS, SHORT_PUTS
   - `/calendars` — CALENDAR
3. **Structure filtering** added to Convex `trades:stats` and `trades:list` queries
4. **Sidebar nav** updated with new pages
5. **clearAll mutation** added to trades.ts

### Trade Data Backfill
- Wiped all trades and started fresh import from Schwab API
- **172 trades imported** (Oct 2025 → Feb 2026): 114W/58L, +$51,052
- Structures: 131 iron flies, 17 iron condors, 24 short straddles
- ISRG removed per Nam's request (CLI reconstruction was inaccurate)

### Key Findings - Schwab CLI Issues
- **schwab-trades CLI has reconstruction bugs** on complex multi-leg trades
- CLI groups stray legs into trades incorrectly (ISRG, DLTR, AVGO, ORCL, CRM)
- CLI marks trades as "not closed" when stray legs exist
- **Trades affected:** ISRG (was -$115K, actually ~-$19.5K straddle+calendar), DLTR, AVGO (-$2,349 not -$1,604), CRM, AI
- Small P&L differences ($10-$300) between CLI and Nam's sheet are likely commissions
- **DG and ORCL:** Schwab CLI was correct, Nam's sheet had wrong contract counts
- **AVGO and DLTR:** Nam's sheet was correct, CLI grouped stray legs

### Convex Deployment Confusion
- Multiple Convex deployments exist: cautious-antelope-194 (prod), woozy-hummingbird-76 (dev), happy-otter-123 (sub-agent created)
- Sub-agent's deployment created confusion with Vercel env vars
- Data is in cautious-antelope-194 (172 trades confirmed)
- Vercel NEXT_PUBLIC_CONVEX_URL set to cautious-antelope-194
- Nam was seeing 27 trades — likely browser caching old JS bundle pointing to wrong deployment
- Need to verify Nam can see all 172 trades (suggested incognito window)

### Remaining Work
- Nam still needs to share Oct/Nov spreadsheet for final reconciliation
- Some trades missing from CLI due to "not closed" bug: LMND, CRM (11/28), DLTR (11/28), NVDA (11/19)
- No GitHub repo connected — deploying via CLI only
- RKT calendar trade from 10/29 not yet properly classified

### Convex Deployment Resolution
- **happy-otter-123** in JS bundle is just example code from Convex npm package (like example.com) — NOT a real deployment
- App correctly connects to cautious-antelope-194 via NEXT_PUBLIC_CONVEX_URL
- Functions deployed to cautious-antelope-194 with `npx convex deploy --yes`
- 172 trades confirmed in cautious-antelope-194
- Nam still couldn't see trades — possible browser caching issue. Suggested incognito window.
- The main dashboard "Recent Trades" section has a limit of 10; Journal page `/journal` shows all trades
- **TODO:** If Nam still can't see trades, check if Vercel is actually serving the latest deployment (check deployment ID in URL vs what we deployed)

### Nam's Spreadsheet vs Schwab CLI
- Neither source is perfect alone
- CLI: accurate on contract counts, can miscalculate P&L on complex trades
- Spreadsheet: accurate on P&L (hand-verified), can have contract count errors
- Best approach: use Schwab for structure/contracts, verify P&L against sheet
